var __decorate=this&&this.__decorate||function(e,t,o,l){var a,r=arguments.length,s=r<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,o):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,l);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(s=(r<3?a(s):r>3?a(t,o,s):a(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};define(["require","exports","@cxl/css","@cxl/template","@cxl/component","@cxl/tsx","@cxl/rx","@cxl/dom","@cxl/ui/icon.js","@cxl/ui/core.js","@cxl/ui/checkbox.js","@cxl/ui/select.js","@cxl/ui/field.js"],(function(e,t,o,l,a,r,s,c,n,d,i,u,p){"use strict";function g(e,t){return l.registable(e,"dataset",t)}function b(e,t,o=1){return String(e).localeCompare(t)*o}function h(e,t,o=1){return e===t?0:e>t?o:-o}Object.defineProperty(t,"__esModule",{value:!0}),t.DatasetSource=t.TableSource=t.DataTable=t.Dataset=t.TablePagination=t.getPageCount=t.TableSelectedCount=t.TableToolbar=t.TableBody=t.TrSelectable=t.Tr=t.TableSelectAll=t.Td=t.Table=t.Th=t.SortIcon=t.datasetRegistable=void 0,t.datasetRegistable=g;let m=class extends a.Component{};m=__decorate([a.Augment()],m),t.SortIcon=m;let v=class extends a.Component{constructor(){super(...arguments),this.sortable=!1,this.sort="none"}};__decorate([a.Attribute()],v.prototype,"width",void 0),__decorate([a.StyleAttribute()],v.prototype,"sortable",void 0),__decorate([a.Attribute()],v.prototype,"sort",void 0),__decorate([a.Attribute()],v.prototype,"field",void 0),v=__decorate([a.Augment("cxl-th",l.role("columnheader"),(function(e){return a.get(e,"sortable").switchMap((t=>{return t?s.merge(g(o=e,(e=>{if("update"===e.type)e.value&&"sortable"===e.value.detail&&e.value.target!==o&&"none"!==o.sort?o.sort="none":"none"!==o.sort&&(e.state.sort={field:o.field,sort:o.sort});else if("sort"===e.type&&"none"!==o.sort){const t=o.field,l="asc"===o.sort?1:-1,a="numeric"===o.sortable?h:b;e.value=e.value.sort(t?(e,o)=>a(e[t],o[t],l):(e,t)=>a(e,t,l))}})),c.onAction(e).tap((()=>{const t=e.sort;e.sort="asc"===t?"desc":"desc"===t?"none":"asc"}))):s.EMPTY;var o}))}),o.css({$:{display:"table-cell",font:"subtitle2",color:"headerText",...o.padding(16),...o.border(0,0,1,0),lineHeight:24,borderStyle:"solid",borderColor:"divider",whiteSpace:"nowrap"},sortIcon:{display:"none",marginLeft:8,scaleY:0,scaleX:0,transformOrigin:"center",verticalAlign:"middle"},$sortable:{cursor:"pointer"},$sortable$hover:{color:"onSurface"},sortIcon$sortable:{display:"inline-block"},none$sortable$hover:{scaleX:1,scaleY:1,opacity:.3},asc:{rotate:0,scaleX:1,scaleY:1},desc:{rotate:180,scaleX:1,scaleY:1}}),(e=>r.dom(r.dom,null,r.dom("slot",null),r.dom(a.Span,{className:"sortIcon",$:t=>function(e,t){let o;return a.get(t,"sort").tap((l=>{o&&e.classList.remove(o),o=l,e.classList.add(l),t.field&&c.trigger(t,"dataset.update","none"===t.sort?"sortable.reset":"sortable")}))}(t,e)},r.dom(d.Svg,{viewBox:"0 0 24 24",width:24},'<path d="M0 0h24v24H0V0z" fill="none"/><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"/>')))))],v),t.Th=v;let f=class extends a.Component{};f=__decorate([a.Augment("cxl-table",l.role("table"),o.css({$:{display:"block",width:"100%",font:"body2",overflowX:"auto",...o.border(1,1,0,1),borderStyle:"solid",borderColor:"divider",borderRadius:4},"@small":{$:{display:"table"}}}),(e=>r.dom("slot",null)))],f),t.Table=f;let y=class extends a.Component{constructor(){super(...arguments),this.right=!1}};__decorate([a.StyleAttribute()],y.prototype,"right",void 0),y=__decorate([a.Augment(l.role("cell"),o.css({$:{display:"table-cell",...o.padding(16),lineHeight:20,flexGrow:1,...o.border(0,0,1,0),borderStyle:"solid",borderColor:"divider"},$right:{textAlign:"right"},$primary:{backgroundColor:"primary",color:"onPrimary"},$secondary:{backgroundColor:"secondary",color:"onSecondary"}}))],y);let _=class extends y{};_=__decorate([a.Augment("cxl-td",(()=>r.dom("slot",null)))],_),t.Td=_;let x=class extends i.Checkbox{};x=__decorate([a.Augment("cxl-table-select-all",l.aria("label","Select All"),(e=>g(e,(t=>{if("select"===t.type&&"select"===t.value){const o=t.target;let l=0;o.selectable.forEach((e=>e.selected&&l++)),e.indeterminate=l>0&&l!==o.selectable.size,e.indeterminate||(e.checked=l>0)}}))),(e=>c.on(e,"change").tap((()=>{void 0!==e.value&&c.trigger(e,"dataset.select",e.checked?"select.all":"select.none")}))))],x),t.TableSelectAll=x;let w=class extends a.Component{};__decorate([a.Attribute()],w.prototype,"value",void 0),w=__decorate([a.Augment("cxl-tr",l.role("row"),o.css({$:{display:"table-row"}}),(e=>r.dom("slot",null)))],w),t.Tr=w;let A=class extends a.Component{constructor(){super(...arguments),this.selected=!1}};__decorate([a.StyleAttribute()],A.prototype,"selected",void 0),__decorate([a.Attribute()],A.prototype,"value",void 0),A=__decorate([a.Augment("cxl-tr-selectable",l.role("row"),o.css({$:{display:"table-row"},$selected:{backgroundColor:"primaryLight"},$hover:{backgroundColor:"onSurface8"},$selected$hover:{backgroundColor:"primaryLight"},cell:{width:48,lineHeight:0,verticalAlign:"bottom"}}),(e=>l.selectable(e)),(e=>g(e,(t=>{"update"===t.type?e.selected=t.target.selected.has(e.value):"select"===t.type&&("select.all"===t.value?e.selected=!0:"select.none"===t.value&&(e.selected=!1))}))),(e=>(e.selected&&c.trigger(e,"dataset.select","select"),a.attributeChanged(e,"selected").tap((()=>c.trigger(e,"dataset.select","select"))))),(e=>r.dom(r.dom,null,r.dom(_,{$:t=>c.on(t,"click").tap((()=>e.selected=!e.selected)),className:"cell"},r.dom(i.Checkbox,{$:t=>s.merge(c.on(t,"change").tap((()=>e.selected=t.checked)),c.on(t,"click").tap((e=>e.stopPropagation()))),ariaLabel:"Select Row",checked:a.get(e,"selected")})),r.dom("slot",null))))],A),t.TrSelectable=A;let S=class extends a.Component{};S=__decorate([a.Augment("cxl-tbody",l.role("rowgroup"),o.css({$:{display:"table-row-group"}}),(()=>r.dom("slot",null)))],S),t.TableBody=S;let $=class extends d.Toolbar{};$=__decorate([a.Augment("cxl-table-toolbar",o.css({$:{...o.border(1,1,0,1),...o.padding(6,16,6,16),lineHeight:44,borderStyle:"solid",borderColor:"divider"}}),(e=>r.dom("slot",null)))],$),t.TableToolbar=$;let C=class extends a.Component{};function T(e,t){return 0===e||0===t?0:Math.floor(e/t)+(e%t==0?-1:0)}__decorate([a.Attribute()],C.prototype,"selected",void 0),C=__decorate([a.Augment(o.css({$:{font:"subtitle",lineHeight:36,height:68,backgroundColor:"primaryLight",color:"onPrimaryLight",display:"flex"}}),(e=>r.dom(d.T,null,a.get(e,"selected").tap((e=>(null==e?void 0:e.length)||0)))))],C),t.TableSelectedCount=C,t.getPageCount=T;let L=class extends a.Component{constructor(){super(...arguments),this.rows=5,this.options=[5,10,25,50],this.page=0,this.total=0}goFirst(){this.page=0}goNext(){this.page+=1}goPrevious(){this.page-=1}goLast(){this.page=T(this.total,this.rows)}};__decorate([a.Attribute()],L.prototype,"rows",void 0),__decorate([a.Attribute()],L.prototype,"options",void 0),__decorate([a.Attribute()],L.prototype,"page",void 0),__decorate([a.Attribute()],L.prototype,"total",void 0),L=__decorate([a.Augment("cxl-table-pagination",o.css({$:{display:"block",font:"body2",textAlign:"center",...o.border(0,1,1,1),...o.padding(6,16,6,16),lineHeight:44,borderStyle:"solid",borderColor:"divider"},rows:{display:"inline-block",...o.margin(0,24,0,16),width:64,verticalAlign:"middle"},"@small":{$:{textAlign:"right"},nav:{display:"inline-block",marginLeft:32}}}),(e=>g(e,(t=>{if("update"===t.type)t.state.slice={page:e.page,rows:e.rows};else if("slice"===t.type){const o=t.value,l=e.page*e.rows;e.total=o.length,t.value=o.slice(l,l+e.rows)}}))),(e=>a.get(e,"page").tap((t=>{const o=T(e.total,e.rows);t<0?e.page=0:t>o&&(e.page=o)}))),(e=>s.merge(a.get(e,"page"),a.get(e,"rows")).tap((()=>c.trigger(e,"dataset.update")))),(e=>r.dom(e.Shadow,null,"Rows per page:",r.dom(p.Field,{className:"rows",outline:!0,dense:!0},r.dom(u.SelectBox,{$:t=>c.on(t,"change").tap((()=>e.rows=t.value)),ariaLabel:"Rows per Page",value:a.get(e,"rows")},l.each(a.get(e,"options"),(e=>r.dom(u.Option,{value:e},e.toString()))))),s.merge(a.get(e,"page"),a.get(e,"rows"),a.get(e,"total")).map((()=>{const t=e.page*e.rows,o=t+e.rows;return`${t+1}-${o>e.total?e.total:o} of ${e.total}`})),r.dom("nav",{className:"nav"},r.dom(n.IconButton,{$:t=>c.onAction(t).tap((()=>e.goFirst()))},r.dom(d.Svg,{viewBox:"0 0 24 24",width:20},'<path d="M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"/><path d="M24 24H0V0h24v24z" fill="none"/>')),r.dom(n.IconButton,{$:t=>c.onAction(t).tap((()=>e.goPrevious()))},r.dom(d.Svg,{viewBox:"0 0 24 24",width:20},'<path d="M0 0h24v24H0z" fill="none"/><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>')),r.dom(n.IconButton,{$:t=>c.onAction(t).tap((()=>e.goNext()))},r.dom(d.Svg,{viewBox:"0 0 24 24",width:20},'<path d="M0 0h24v24H0z" fill="none"/><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>')),r.dom(n.IconButton,{$:t=>c.onAction(t).tap((()=>e.goLast()))},r.dom(d.Svg,{viewBox:"0 0 24 24",width:20},'<path d="M0 0h24v24H0V0z" fill="none"/><path d="M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"/>'))))))],L),t.TablePagination=L;let k=class extends a.Component{constructor(){super(...arguments),this.source=[],this.value=[],this.selectable=new Set,this.selected=new Set}};__decorate([a.Attribute()],k.prototype,"source",void 0),__decorate([a.Attribute()],k.prototype,"value",void 0),k=__decorate([a.Augment("cxl-dataset",(e=>{const t=new Set;let o={};function r(e){return t.forEach((t=>t(e))),e.value}function n(t){const l={};r({type:"update",value:t,target:e,state:l}),o=l}return s.merge(l.stopChildrenEvents(e,"change"),s.merge(a.get(e,"source"),c.on(e,"dataset.update").tap(n)).raf((function(){if(e.update)return e.update(o);const l=e.source.slice(0),a={type:"filter",target:e,value:l,state:o};t.forEach((e=>e(a))),a.type="sort",t.forEach((e=>e(a))),a.type="slice",t.forEach((e=>e(a))),a.type="render",t.forEach((e=>e(a))),e.value=a.value})),l.registableHost(e,"selectable",e.selectable),l.registableHost(e,"dataset",t).raf((()=>n())),c.on(e,"dataset.select").tap((t=>{const o=t.target;e.selected[o.selected?"add":"delete"](o.value)})).raf((t=>r({type:"select",value:t.detail,target:e,state:o}))),a.attributeChanged(e,"value").pipe(l.triggerEvent(e,"change")))}))],k),t.Dataset=k;let M=class extends k{};M=__decorate([a.Augment("cxl-datatable",(e=>r.dom(r.dom,null,r.dom("slot",{name:"header"}),r.dom(f,null,r.dom("slot",null)),r.dom("slot",{name:"footer"}))))],M),t.DataTable=M;let P=class extends a.Component{};P=__decorate([a.Augment("cxl-table-source",l.role("rowgroup"),o.css({$:{display:"table-row-group"}}),(e=>s.merge(g(e,(t=>{var o;if("update"===t.type&&"table-source.update"===(null===(o=t.value)||void 0===o?void 0:o.detail)){const o=[];for(const t of e.children)void 0!==t.value&&o.push(t.value);t.target.source=o}else if("render"===t.type){!function(t){var o;const l=e.shadowRoot.querySelectorAll("slot");let a=l.length;if(a>t)for(;a-- >t;)l[a].remove();else if(a<t)for(;a<t;){const t=r.dom("slot",{name:"row"+a++});null===(o=e.shadowRoot)||void 0===o||o.appendChild(t)}}(t.value.length);for(const o of e.children){const e=t.value.indexOf(o.value);o.slot=-1===e?"":`row${e}`}}})),c.onChildrenMutation(e).tap((()=>{c.trigger(e,"dataset.update","table-source.update")})))))],P),t.TableSource=P;let H=class extends a.Component{};__decorate([a.Attribute()],H.prototype,"src",void 0),H=__decorate([a.Augment("cxl-dataset-source",(e=>{let t;return s.merge(g(e,(e=>{var o;"update"===e.type&&"dataset-source.update"===(null===(o=e.value)||void 0===o?void 0:o.detail)&&(e.target.source=t)})),a.get(e,"src").switchMap((o=>s.defer((()=>o?s.from(fetch(o).then((e=>e.json()))):s.EMPTY)).tap((o=>{t=o,c.trigger(e,"dataset.update","dataset-source.update")})))))}))],H),t.DatasetSource=H}));
//# sourceMappingURL=index.min.js.map