<!DOCTYPE html><meta charset="utf-8">
<script src="/cxl/dist/tester/require-browser.js"></script>
<script>
	require.replace = function (path) {
		return path.replace(
			/^@cxl\/(.+)/,
			(str, p1) =>
				`/cxl/dist/${str.endsWith('.js') ? p1 : p1 + '/index.js'}`
		);
	};
	require('@cxl/ui');
	require('@cxl/ui-router');
	require('@cxl/ui-www');
</script>

<title>@cxl/ui - Demo</title>
<script>
	const avatar = `data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMjkuMjUgMzI5LjI1IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjQ3LjgxIDIzMy43Yy0xOC42Ni02LjY4LTUxLjQ1LTExLjc0LTUxLjQ1LTgxLjM4aC02My40N2MwIDY5LjY0LTMyLjc5IDc0LjctNTEuNDUgODEuMzggMCA0Ny4zNiA2OC44MyA0OC44MiA4MC42OCA1My4yNHYxLjUzcy45My0uMTkgMi41LS42OGMxLjU4LjUgMi41LjY4IDIuNS42OHYtMS41NGMxMS44Ni00LjQgODAuNy01Ljg3IDgwLjctNTMuMjN6IiBmaWxsPSIjZjNkOGI2Ii8+PHBhdGggZD0iTTE5Ni4zNiAxNTIuMzJoLTMxLjczVjI4Ny44YzEuNTcuNSAyLjUuNjggMi41LjY4di0xLjUzYzExLjg1LTQuNDIgODAuNjgtNS44NyA4MC42OC01My4yNC0xOC42Ni02LjY5LTUxLjQ1LTExLjc0LTUxLjQ1LTgxLjM4eiIgZmlsbD0iI2VlYzhhMiIvPjxwYXRoIGQ9Ik0xNjQuNjMgMTc0LjQ4Yy0yNy40NiAwLTQ4LjQxLTIzLjEyLTU3LjgtNDAuNDVzLTE1Ljg5LTc5LjQ1IDQuMzQtMTA2LjljMTkuOC0yNi44OCA1My40Ni0xMy44NCA1My40Ni0xMy44NFMxOTguMjguMjUgMjE4LjA5IDI3LjEzYzIwLjIyIDI3LjQ1IDEzLjcyIDg5LjU2IDQuMzMgMTA2LjktOS40IDE3LjMzLTMwLjM0IDQwLjQ1LTU3LjggNDAuNDV6IiBmaWxsPSIjZjNkYmM0Ii8+PHBhdGggZD0iTTIxOC4wOSAyNy4xM0MxOTguMjguMjUgMTY0LjYzIDEzLjI5IDE2NC42MyAxMy4yOXYxNjEuMmMyNy40NSAwIDQ4LjQtMjMuMTMgNTcuOC00MC40NiA5LjM4LTE3LjM0IDE1Ljg4LTc5LjQ1LTQuMzQtMTA2Ljl6IiBmaWxsPSIjZWRjZWFlIi8+PGVsbGlwc2UgdHJhbnNmb3JtPSJyb3RhdGUoLTY5LjI1IDIyNi44IDEwNi43NykiIGN4PSIyMjYuOCIgY3k9IjEwNi43NyIgcng9IjE3LjE5IiByeT0iMTAuMDUiIGZpbGw9IiNlZGNlYWUiLz48ZWxsaXBzZSB0cmFuc2Zvcm09InJvdGF0ZSg2OS4yNSAxMDIuNDUgMTA2Ljc4KSIgY3g9IjEwMi40NSIgY3k9IjEwNi43OCIgcng9IjE3LjE5IiByeT0iMTAuMDUiIGZpbGw9IiNmM2RiYzQiLz48cGF0aCBkPSJNMjg0LjYgMjg4LjU3djQwLjY4SDQ0LjY1di00MC42OGMwLTMwLjQzIDE3LjM4LTU2Ljk3IDQwLjYtNzAuOTIgNi4wNS0zLjY0IDE5LjctNy40MyAyNi44NS05LjIgNS45NS0xLjQ4IDUzLjQ0IDIyLjc0IDUzLjQ0IDIyLjc0czQ4LjY3LTIzLjIyIDU0LjYzLTIxLjczYzcuMTUgMS43NiAxNy44IDQuNTUgMjMuODQgOC4yIDIzLjIzIDEzLjk0IDQwLjYgNDAuNDggNDAuNiA3MC45eiIgZmlsbD0iI2I3Y2FlOSIvPjxwYXRoIGQ9Ik0yNDQgMjE3LjY2Yy02LjA0LTMuNjUtMTYuNjktNi40My0yMy44NC04LjItNS45NS0xLjQ5LTU0LjYzIDIxLjczLTU0LjYzIDIxLjczbC0uOS0uNDZ2OTguNTJIMjg0LjZ2LTQwLjY4YzAtMzAuNDMtMTcuMzgtNTYuOTctNDAuNi03MC45MXoiIGZpbGw9IiM5NmIzZDQiLz48cGF0aCBmaWxsPSIjNDk0ODU3IiBkPSJtMTg2LjI5IDIzNS44MS0yMS42Ni02Ljg0LTIxLjY3IDYuODQgMTQuMzEgMTAuOTktOC45OCA4Mi40NWgzMi42N2wtOC45OC04Mi40NXoiLz48cGF0aCBmaWxsPSIjMzMzMzNmIiBkPSJtMTg2LjI5IDIzNS44MS0yMS42Ni02Ljg0djEwMC4yOGgxNi4zM2wtOC45OC04Mi40NXoiLz48ZyBmaWxsPSIjZGVkZGUwIj48cGF0aCBkPSJtMjEyLjggMjA0LjY4LTQ4LjE4IDIzLjQ0LTQ4LjE2LTIzLjQ0Yy0xMS41IDUuNSAxMC40IDM4LjQ0IDE0LjgzIDM2LjgzIDEwLjk2LTMuOTYgMzMuMzQtMTAuMzIgMzMuMzQtMTAuMzJzMjIuMzcgNi4zNiAzMy4zMyAxMC4zMmM0LjQ0IDEuNiAyNi4zMy0zMS4zMyAxNC44My0zNi44M3oiLz48cGF0aCBkPSJtMjEyLjggMjA0LjY4LTQ4LjE4IDIzLjQ0djMuMDdzMjIuMzggNi4zNiAzMy4zNCAxMC4zMmM0LjQ0IDEuNiAyNi4zMy0zMS4zMyAxNC44My0zNi44M3oiLz48L2c+PHBhdGggZD0iTTIwNi42MiA5Ny44NGgtMjcuNjljLTEuMTkgMC0yLjM2LjI0LTMuNDMuNzFsLTEwLjg4IDMuODgtMTAuODctMy44OGE4LjU3IDguNTcgMCAwIDAtMy40My0uNzFoLTI3LjY5Yy01LjUgMC03LjQgOS40Ny03LjQgOS40NyAwIDEyLjU0IDkuMTggMjIuNyAyMy43NSAyMi43IDguODggMCAxNy40LTkuNDQgMjIuNjUtMTcuMDhoNmM1LjI0IDcuNjQgMTMuNzYgMTcuMDggMjIuNjQgMTcuMDggMTQuNTcgMCAyMy43Ni0xMC4xNiAyMy43Ni0yMi43IDAgMC0xLjktOS40Ny03LjQxLTkuNDd6IiBmaWxsPSIjYTdiOGQ0Ii8+PHBhdGggZD0iTTIwNi42MiA5Ny44NGgtMjcuNjljLTEuMTkgMC0yLjM2LjI0LTMuNDMuNzFsLTEwLjg4IDMuODh2MTAuNWgzYzUuMjQgNy42NCAxMy43NyAxNy4wOCAyMi42NSAxNy4wOCAxNC41NyAwIDIzLjc2LTEwLjE2IDIzLjc2LTIyLjcgMCAwLTEuOS05LjQ3LTcuNDEtOS40N3oiIGZpbGw9IiM4YWE0YzIiLz48cGF0aCBkPSJNMjIxLjc3IDIyLjk4Yy0yLjE2LjAxLTI1LjQ3LTEzLjEzLTQxLjM4LTE2LjM2LTE4Ljc2LTMuODEtMTguNzgtLjUzLTI2LjAyIDEuNTItMjkuNC05LjAyLTUyLjk3LTE1LjAyLTUxLjkzIDcgMS43NiAzNy4wNy05LjM0IDY1Ljk5LTQuODYgNzguOTRzOC40NyAyMy40IDguNDcgMjMuNCAxIDMuNTcgMi45OC0xNi44NS00LjU3LTQyLjM3IDExLjE0LTQwLjM4YzE1LjcyIDIgMTAuNzkgMTQuOCA0NC40NCAxNC44IDMzLjM5IDAgMjguNzItMTIuOCA0NC40My0xNC44IDE1LjcyLTEuOTkgOS4xNSAxOS45NiAxMS4xNCA0MC4zOHMyLjk5IDE2Ljg2IDIuOTkgMTYuODYgMy45OC0xMC40NiA4LjQ2LTIzLjQxYzQuNDktMTIuOTUgOS41LTcxLjI3LTkuODYtNzEuMXoiIGZpbGw9IiM1NDU0NjUiLz48cGF0aCBkPSJNMjIxLjc3IDIyLjk4Yy0yLjE2LjAxLTI1LjQ3LTEzLjEzLTQxLjM4LTE2LjM2LTcuOTgtMS42Mi0xMi41Ny0xLjk2LTE1Ljc2LTEuNjV2NzAuMDljMzMuMzcgMCAyOC43LTEyLjgyIDQ0LjQxLTE0LjggMTUuNzItMiA5LjE1IDE5Ljk1IDExLjE0IDQwLjM3czIuOTkgMTYuODYgMi45OSAxNi44NiAzLjk4LTEwLjQ2IDguNDYtMjMuNDFjNC40OS0xMi45NSA5LjUtNzEuMjctOS44Ni03MS4xeiIgZmlsbD0iIzQ5NDg1NyIvPjxlbGxpcHNlIHRyYW5zZm9ybT0icm90YXRlKDY5LjI1IDEwMi40NSAxMDYuNzgpIiBjeD0iMTAyLjQ1IiBjeT0iMTA2Ljc4IiByeD0iMTcuMTkiIHJ5PSIxMC4wNSIgZmlsbD0iI2YzZGJjNCIvPjxlbGxpcHNlIHRyYW5zZm9ybT0icm90YXRlKC02OS4yNSAyMjYuOCAxMDYuNzcpIiBjeD0iMjI2LjgiIGN5PSIxMDYuNzciIHJ4PSIxNy4xOSIgcnk9IjEwLjA1IiBmaWxsPSIjZWRjZWFlIi8+PC9zdmc+`;
</script>
<cxl-application>
	<cxl-appbar>
		<cxl-navbar>
			<cxl-c pad16>
				<cxl-user-navbar id="user-navbar"></cxl-user-navbar>
			</cxl-c>
			<cxl-router-item href="">Home</cxl-router-item>
			<cxl-hr></cxl-hr>
			<!--cxl-router-item href="autocomplete">Autocomplete</cxl-router-item-->
			<!--cxl-navbar-subtitle>Dashboards</cxl-navbar-subtitle>
			<cxl-router-item href="dashboard1">Dashboard 1</cxl-router-item-->
		</cxl-navbar>
		<cxl-router-appbar-title></cxl-router-appbar-title>
		<cxl-icon-button id="theme-btn" title="Enable Dark Theme"
			><cxl-svg-icon icon="icons.svg#nightlight_round"></cxl-svg-icon
		></cxl-icon-button>
		<cxl-toggle>
			<cxl-icon-button
				><cxl-svg-icon
					icon="icons.svg#notifications_none"
				></cxl-svg-icon>
				<cxl-badge secondary size="-1"></cxl-badge>
			</cxl-icon-button>
			<cxl-popup>
				<cxl-menu>
					<cxl-c
						flex
						pad16
						middle
						style="padding-top: 8px; padding-bottom: 8px"
					>
						<cxl-t style="flex-grow: 1; margin: 0" subtitle2
							>Notifications</cxl-t
						>
						<cxl-button flat size="-1" style="margin-right: -8px"
							>See All</cxl-button
						>
					</cxl-c>
					<cxl-hr></cxl-hr>
					<cxl-item>
						<cxl-avatar></cxl-avatar>
						<cxl-c>
							<cxl-t subtitle>User1 left a comment</cxl-t>
							<cxl-t subtitle2>1 hour ago</cxl-t>
						</cxl-c>
					</cxl-item>
					<cxl-item>
						<cxl-avatar></cxl-avatar>
						<cxl-c>
							<cxl-t subtitle>User2 shared a link</cxl-t>
							<cxl-t subtitle2>2 hours ago</cxl-t>
						</cxl-c>
					</cxl-item>
				</cxl-menu>
			</cxl-popup>
		</cxl-toggle>

		<cxl-toggle-drawer drawer="drawer-settings">
			<cxl-icon-button id="btn-settings">
				<cxl-svg-icon icon="icons.svg#settings"></cxl-svg-icon>
			</cxl-icon-button>
		</cxl-toggle-drawer>
	</cxl-appbar>
	<cxl-drawer right id="drawer-settings">
		<cxl-c pad16>
			<cxl-c flex middle>
				<cxl-t h6 style="margin-bottom: 0; flex-grow: 1">Settings</cxl-t
				><cxl-toggle-drawer drawer="drawer-settings"
					><cxl-icon-button title="Close drawer"
						><cxl-svg-icon icon="icons.svg#clear"></cxl-svg-icon
					></cxl-icon-button>
				</cxl-toggle-drawer>
			</cxl-c>
			<cxl-hr pad="8"></cxl-hr>
			<cxl-grid>
				<cxl-field>
					<cxl-label>Select</cxl-label>
					<cxl-select>
						<cxl-option>Option 1</cxl-option>
						<cxl-option>Option 2</cxl-option>
						<cxl-option>Option 3</cxl-option>
						<cxl-option>Option 4</cxl-option>
					</cxl-select>
				</cxl-field>
			</cxl-grid>
		</cxl-c>
	</cxl-drawer>
	<cxl-page>
		<cxl-router-outlet></cxl-router-outlet>
	</cxl-page>
</cxl-application>
<cxl-router>
	<template data-path="" data-title="Home">
		<cxl-grid>
			<cxl-card pad32 sm8 flex gap="64">
				<cxl-c>
					<cxl-avatar id="user-avatar" size="5"></cxl-avatar>
					<cxl-badge
						style="
							margin-left: -24px;
							vertical-align: bottom;
							border: 1px solid var(--cxl-surface);
						"
						size="1"
						color="secondary"
						>GB</cxl-badge
					>
				</cxl-c>
				<cxl-c>
					<cxl-t h4 style="margin-bottom: 8px">Welcome User</cxl-t>
					<cxl-t subtitle2>Last Login: 09-08-2021</cxl-t>
					<cxl-t subtitle2>2 new alerts.</cxl-t>
				</cxl-c>
			</cxl-card>
			<cxl-card pad16 sm4>
				<cxl-t h6>Total Build Time</cxl-t>
				<cxl-t center h2 id="stats-build-time"></cxl-t>
			</cxl-card>
			<cxl-c sm8>
				<cxl-card pad="32">
					<cxl-c
						flex
						middle
						style="margin-top: -8px; margin-bottom: 8px"
					>
						<cxl-t style="flex-grow: 1; margin: 0" subtitle
							>My Projects</cxl-t
						>
						<cxl-button flat>View All</cxl-button>
					</cxl-c>
					<cxl-hr></cxl-hr>
					<cxl-list
						style="margin-left: -16px; margin-right: -16px"
						id="project-list"
					></cxl-list>
				</cxl-card>
			</cxl-c>
			<cxl-c sm4 vflex gap="16">
				<cxl-card pad="16">
					<cxl-field outline>
						<cxl-label>Search</cxl-label>
						<cxl-input></cxl-input>
						<cxl-field-clear></cxl-field-clear>
					</cxl-field>
					<br />
					<p style="line-height: 40px">
						<cxl-chip>editor</cxl-chip>
						<cxl-chip>graphics</cxl-chip>
						<cxl-chip>webgl</cxl-chip>
						<cxl-chip>documentation</cxl-chip>
						<cxl-chip>regex</cxl-chip>
						<cxl-chip>html</cxl-chip>
						<cxl-chip>canvas</cxl-chip>
						<cxl-chip>typescript</cxl-chip>
						<cxl-chip>ui/ux</cxl-chip>
						<cxl-chip>search</cxl-chip>
					</p>
				</cxl-card>
				<cxl-card pad="16">
					<cxl-datepicker></cxl-datepicker>
				</cxl-card>
				<cxl-card grow pad="16">
					<cxl-t h6>Links</cxl-t>
					<a href="https://cxl.app">Home Page</a>
				</cxl-card>
			</cxl-c>
		</cxl-grid>
		<script type="module">
			const projectList = document.getElementById('project-list');
			const buildTimeEl = document.getElementById('stats-build-time');
			const userAvatar = document.getElementById('user-avatar');
			const { count } = require('@cxl/ui/animate.js');

			userAvatar.src = avatar;

			function getTotalCoverage(dir, coverage) {
				const regex = new RegExp(`\/${dir}\/.+.\.ts`);
				let total = 0;
				let count = 0;
				for (const cov of coverage) {
					if (regex.test(cov.url)) {
						total += cov.blockCovered / cov.blockTotal;
						count++;
					}
				}

				return ((total / count) * 100).toFixed(0);
			}

			count({
				start: 0,
				end: 320,
				time: 1000,
			}).subscribe(i => {
				buildTimeEl.innerHTML = i.toFixed(2) + 's';
			});

			fetch('stats.json')
				.then(res => res.json())
				.then(data => {
					const html = data.packages.map(p =>
						p.npms.code !== 'NOT_FOUND'
							? `<cxl-item-layout><cxl-avatar text="${getTotalCoverage(
									p.dir,
									p.testReport.coverage
							  )}"></cxl-avatar><cxl-c grow><cxl-t subtitle>${
									p.name
							  } ${p.package.version}</cxl-t><cxl-t subtitle2>${
									p.package.description
							  }</cxl-t></cxl-c><cxl-menu-toggle position="right top">
	<cxl-item>View Documentation</cxl-item>
	<cxl-item>Bugs List</cxl-item>
	<cxl-item>Github Repository</cxl-item>
	<cxl-hr></cxl-hr>
	<cxl-item>See More</cxl-item>
							</cxl-menu-toggle></cxl-item-layout>`
							: ''
					);

					projectList.innerHTML = html.join('');
					console.log(data);
				});
		</script>
	</template>
	<template data-path="dashboard1" data-title="Dashboard 1"> </template>
	<template data-path="autocomplete" data-title="Autocomplete">
		<cxl-field>
			<cxl-label>Autocoplete Input</cxl-label>
			<cxl-input></cxl-input>
			<cxl-autocomplete>
				<cxl-option>Item 1</cxl-option>
				<cxl-option>Item 2</cxl-option>
			</cxl-autocomplete>
		</cxl-field>
	</template>
</cxl-router>
<script type="module">
	const themeBtn = document.getElementById('theme-btn');
	const nightIcon = themeBtn.children[0];
	const lightIcon = document.createElement('cxl-svg-icon');
	const userNavbar = document.getElementById('user-navbar');
	const themeKey = 'cxl.ui-demo.theme';
	let darkStyles;

	function applyLightTheme() {
		darkStyles.remove();
		lightIcon.remove();
		themeBtn.appendChild(nightIcon);
		themeBtn.title = 'Enable Light Theme';
		localStorage.removeItem(themeKey);
	}

	function applyDarkTheme() {
		if (!darkStyles) {
			const { getStyleElement } = require('@cxl/ui/theme-dark.js');
			darkStyles = getStyleElement();
		}
		document.head.appendChild(darkStyles);
		nightIcon.remove();
		themeBtn.appendChild(lightIcon);
		themeBtn.title = 'Enable Dark Theme';
		localStorage.setItem(themeKey, 'dark');
	}

	if (localStorage.getItem(themeKey) === 'dark') applyDarkTheme();

	userNavbar.user = {
		displayName: 'testuser123',
		isVerified: true,
		email: 'testuser@coaxialhost.com',
		photoUrl: avatar,
	};
	lightIcon.icon = 'icons.svg#wb_sunny';

	themeBtn.addEventListener('click', () => {
		if (!darkStyles || !darkStyles.parentNode) applyDarkTheme();
		else applyLightTheme();
	});
</script>
