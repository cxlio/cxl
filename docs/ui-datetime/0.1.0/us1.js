var __decorate=this&&this.__decorate||function(e,t,a,o){var n,r=arguments.length,l=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,a,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(r<3?n(l):r>3?n(t,a,l):n(t,a))||l);return r>3&&l&&Object.defineProperty(t,a,l),l};define(["require","exports","@cxl/ui/input-base.js","@cxl/component","@cxl/css","@cxl/tsx","@cxl/rx","@cxl/dom","@cxl/template","@cxl/ui","@cxl/ui/core.js","@cxl/ui/form.js","@cxl/ui/icon.js"],(function(e,t,a,o,n,r,l,s,i,d,c,u,p){"use strict";function g(e){return(null==e?void 0:e.date)?e.date.getDate():""}function m(e){return e?`btn ${e.isToday?"today":""} ${e.isOutsideMonth?"outside":""}`:"btn"}function v(e){const t=new Date(e),a=t.getFullYear(),o=t.getMonth(),n=new Date(a,o,1),r=new Date(a,o+1,1),l=[],s=(new Date).setHours(0,0,0,0);n.setDate(1-n.getDay()),r.setDate(7-(r.getDay()||7));do{const e=new Date(n.getTime()),t=e.getTime();l.push({date:e,time:t,isOutsideMonth:e.getMonth()!==o,isToday:s===t}),n.setDate(n.getDate()+1)}while(n<=r);return l}Object.defineProperty(t,"__esModule",{value:!0}),t.DatepickerInput=t.DatepickerToggle=t.Datepicker=t.CalendarDate=void 0;let f=class extends c.ButtonBase{constructor(){super(...arguments),this.selected=!1,this.flat=!0}};function h(e){return new Date(e).setHours(0,0,0,0)}__decorate([o.StyleAttribute()],f.prototype,"selected",void 0),__decorate([o.Attribute()],f.prototype,"date",void 0),f=__decorate([o.Augment("cxl-calendar-date",n.css({$:{textAlign:"center",cursor:"pointer"},$flat:n.padding(4,0,4,0),btn:{borderRadius:40,width:32,height:32,lineHeight:32,display:"inline-block",backgroundColor:"surface",color:"onSurface"},outside:{color:"headerText"},today:{borderWidth:1,borderStyle:"solid",borderColor:"primary"},btn$selected:{backgroundColor:"primary",color:"onPrimary"},...i.StateStyles}),(e=>r.dom(d.Span,{className:o.get(e,"date").map(m)},o.get(e,"date").map(g))))],f),t.CalendarDate=f;let x=class extends a.InputBase{constructor(){super(...arguments),this.month=new Date}focus(){const e=this.shadowRoot;if(!e)return;const t=e.querySelector("[selected]")||e.querySelector("cxl-calendar-date");t&&t.focus()}};__decorate([o.Attribute()],x.prototype,"month",void 0),x=__decorate([o.Augment("cxl-calendar-month",n.css({$:{display:"block"},$disabled:i.DisabledStyles,day:{textAlign:"center",...n.padding(12,0,12,0),color:"headerText",font:"default"},grid:{columnGap:0,rowGap:0}}),i.disabledAttribute,i.focusableEvents,(e=>{const t=o.get(e,"value").filter((e=>!!e)).map(h);return r.dom(d.Grid,{columns:7,className:"grid"},i.each(i.breakpoint(e).map((e=>[0,1,2,3,4,5,6].map((t=>function(e,t){const a=new Date,o="xsmall"===t?"narrow":"small"===t?"short":"long";return a.setDate(a.getDate()-a.getDay()+e),a.toLocaleDateString(navigator.language,{weekday:o})}(t,e))))),(e=>r.dom("div",{className:"day"},e))),i.each(function(e){return o.get(e,"month").map((e=>{const t=new Date(e);return t.setDate(1),t.setHours(0,0,0,0)})).distinctUntilChanged()}(e).map(v),(a=>r.dom(f,{$:t=>s.onAction(t).tap((()=>function(t){var a;e.value=(null===(a=t.date)||void 0===a?void 0:a.date)||new Date}(t))),selected:e=>t.map((t=>{var a;return(null===(a=e.date)||void 0===a?void 0:a.time)===t})),date:a}))))}))],x);let y=class extends a.InputBase{constructor(){super(...arguments),this["start-year"]=0,this.value=0}focus(){const e=this.shadowRoot;if(!e)return;const t=e.querySelector("[primary]")||e.querySelector("cxl-button");t&&t.focus()}};__decorate([o.Attribute()],y.prototype,"start-year",void 0),y=__decorate([o.Augment("cxl-calendar-year",n.css({$disabled:i.DisabledStyles,selected:{borderColor:"primary",borderWidth:1,borderStyle:"solid",color:"primary"}}),(e=>{const t=l.be([]);return e.bind(o.get(e,"start-year").tap((e=>{const a=[];for(let t=e;t<e+16;t++)a.push(t);t.next(a)}))),e.bind(i.disabledAttribute(e)),e.bind(i.focusableEvents(e)),r.dom(d.Grid,{columns:4},i.each(t,(t=>r.dom(d.Button,{$:a=>s.onAction(a).tap((()=>e.value=t)),flat:!0,className:o.get(e,"value").map((e=>t===e?"selected":""))},t))))}))],y);let b=class extends a.InputBase{constructor(){super(...arguments),this.value=void 0}focus(){var e,t;null===(t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".opened"))||void 0===t||t.focus()}};b=__decorate([o.Augment("cxl-datepicker",n.css({$:{display:"block",backgroundColor:"surface",paddingBottom:8},header:{display:"flex",...n.padding(8,12,8,12),height:52},divider:{flexGrow:1},closed:{scaleY:0,transformOrigin:"top"},opened:{scaleY:1,transformOrigin:"top"},year:{position:"absolute",top:0,left:0,right:0,bottom:0},rel:{position:"relative"}}),(e=>{const t=l.be(!1),a=l.be(""),n=l.ref(),u=l.be(0),g=l.ref(),m=l.ref();function v(){t.next(!t.value)}function f(e){const a=new Date(g.value);a.setFullYear(e),g.next(a),t.next(!1)}return e.bind(g.tap((e=>{const t=e.getFullYear();a.next(e.toLocaleDateString(navigator.language,{year:"numeric",month:"long"})),u.next(t-t%16),m.next(e.getFullYear())}))),e.bind(o.get(e,"value").tap((t=>{if(t){if(!(t instanceof Date))return e.value=new Date(t);if(e.invalid=isNaN(t.getTime()))return e.value=void 0;n.next(t),g.next(t),m.next(t.getFullYear())}else g.next(new Date),void 0!==t&&(e.value=void 0)}))),r.dom(r.dom,null,r.dom("div",{className:"header"},r.dom(d.Button,{title:t.map((e=>(e?"Close":"Open")+" Year Panel")),$:e=>s.onAction(e).tap(v),flat:!0},a,r.dom(c.Svg,{viewBox:"0 0 24 24",width:20},'<path d="M0 0h24v24H0z" fill="none"/><path d="M7 10l5 5 5-5z"/>')),r.dom("span",{className:"divider"}),r.dom(p.IconButton,{title:t.map((e=>"Previous "+(e?"Year Page":"Month"))),$:i.$onAction((function(){if(t.value)u.next(u.value-16);else{const e=new Date(g.value);e.setMonth(e.getMonth()-1),g.next(e)}}))},r.dom(c.Svg,{viewBox:"0 0 24 24",width:20},'<path d="M0 0h24v24H0z" fill="none"/><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>')),r.dom(p.IconButton,{title:t.map((e=>"Next "+(e?"Year Page":"Month"))),$:i.$onAction((function(){if(t.value)u.next(u.value+16);else{const e=new Date(g.value);e.setMonth(e.getMonth()+1),g.next(e)}}))},r.dom(c.Svg,{viewBox:"0 0 24 24",width:20},'<path d="M0 0h24v24H0z" fill="none"/><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>'))),r.dom("div",{className:"rel"},r.dom(x,{$:t=>i.onValue(t).tap((t=>e.value=t)),className:t.map((e=>e?"closed":" opened")),month:g,value:n}),r.dom(y,{$:e=>i.onValue(e).tap(f),"start-year":u,value:m,className:t.map((e=>e?"year opened":"year closed"))})))}))],b),t.Datepicker=b;let D=class extends a.InputBase{constructor(){super(...arguments),this.opened=!1}};__decorate([o.StyleAttribute()],D.prototype,"opened",void 0),D=__decorate([o.Augment("cxl-datepicker-toggle",n.css({trigger:{backgroundColor:"transparent"},calendar:{position:"absolute",left:-12,right:-12,top:26,display:"none",elevation:1},calendar$opened:{display:"block"}}),(e=>r.dom(r.dom,null,r.dom(p.IconButton,{$:t=>s.onAction(t).tap((()=>e.opened=!e.opened)),title:o.get(e,"opened").map((e=>(e?"Open":"Close")+" Datepicker")),className:"trigger"},r.dom(c.Svg,{viewBox:"0 0 24 24",width:20},'<path d="M0 0h24v24H0z" fill="none"/><path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"/>')),r.dom(b,{className:"calendar",value:o.get(e,"value"),$:t=>l.merge(o.get(t,"value").tap((t=>{e.value=t,e.opened=!1})),o.get(e,"opened").tap((e=>e&&t.focus())),s.onKeypress(e,"escape").tap((()=>e.opened=!1)))}))))],D),t.DatepickerToggle=D;let w=class extends a.InputBase{};w=__decorate([o.Augment("cxl-datepicker-input",n.css({$:{display:"flex",flexGrow:1},input:{color:"onSurface",font:"default",minHeight:20,outline:0,flexGrow:1},toggle:{marginTop:-16,marginRight:-4}}),(e=>r.dom(d.Span,{className:"input",$:t=>l.merge(u.focusProxy(t,e),o.get(e,"value").tap((a=>{if(a&&!(a instanceof Date))return e.value=new Date(a);if(!a||isNaN(a.getTime()))return e.value=void 0;const o=a.toLocaleDateString();t.textContent!==o&&(t.textContent=o)})),o.get(e,"disabled").raf((e=>t.contentEditable=e?"false":"true")),s.on(t,"blur").tap((()=>{const a=t.textContent,o=a?new Date(a):void 0;o&&isNaN(o.getTime())&&(e.value=void 0),e.value=o})),s.onKeypress(t,"enter").tap((e=>e.preventDefault())))})),(e=>r.dom(D,{className:"toggle",value:o.get(e,"value"),$:t=>i.onValue(t).tap((t=>e.value=t))})))],w),t.DatepickerInput=w}));
//# sourceMappingURL=index.min.js.map