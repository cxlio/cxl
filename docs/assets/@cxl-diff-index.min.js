define("@cxl/diff",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patch=t.diff=void 0;const n=-1;function l(e,t){if(e===t)return e?[0,e]:[];let h=r(e,t);const s=e.slice(0,h);h=c(e=e.slice(h),t=t.slice(h));const f=e.slice(e.length-h),u=function(e,t){let h;if(!e)return[1,t];if(!t)return[n,e];const s=e.length>t.length?e:t,f=e.length>t.length?t:e,u=s.indexOf(f);if(-1!==u)return h=[1,s.slice(0,u),0,f,1,s.slice(u+f.length)],e.length>t.length&&(h[0]=h[4]=n),h;if(1===f.length)return[n,e,1,t];const o=function(e,t){const n=e.length>t.length?e:t,l=e.length>t.length?t:e;if(n.length<4||2*l.length<n.length)return null;function i(e,t,n){const l=e.slice(n,n+Math.floor(e.length/4));let i=-1,h="",s="",f="",u="",o="";for(;-1!==(i=t.indexOf(l,i+1));){const l=r(e.slice(n),t.slice(i)),g=c(e.slice(0,n),t.slice(0,i));h.length<g+l&&(h=t.slice(i-g,i)+t.slice(i,i+l),s=e.slice(0,n-g),f=e.slice(n+l),u=t.slice(0,i-g),o=t.slice(i+l))}return 2*h.length>=e.length?[s,f,u,o,h]:null}const h=i(n,l,Math.ceil(n.length/4)),s=i(n,l,Math.ceil(n.length/2));let f,u,o,g,a;if(!h&&!s)return null;f=s?h&&h[4].length>s[4].length?h:s:h;if(!f)return null;e.length>t.length?(u=f[0],o=f[1],g=f[2],a=f[3]):(g=f[0],a=f[1],u=f[2],o=f[3]);return[u,o,g,a,f[4]]}(e,t);if(o){const e=l(o[0],o[2]),t=l(o[1],o[3]);return e.push(0,o[4],...t),e}return function(e,t){const l=e.length,r=t.length,c=Math.ceil((l+r)/2),h=c,s=2*c,f=l-r,u=f%2!=0,o=new Int16Array(s),g=new Int16Array(s);o[h+1]=0,g[h+1]=0;let a,d,M,p,x,b,y,O,m,v=0,w=0,A=0,I=0;for(b=0;b<c;b++){for(y=-b+v;y<=b-w;y+=2){for(x=h+y,M=y===-b||y!==b&&o[x-1]<o[x+1]?o[x+1]:o[x-1]+1,p=M-y;M<l&&p<r&&e[M]===t[p];)M++,p++;if(o[x]=M,M>l)w+=2;else if(p>r)v+=2;else if(u&&(a=h+f-y,a>=0&&a<s&&-1!==g[a]&&(d=l-g[a],M>=d)))return i(e,t,M,p)}for(O=-b+A;O<=b-I;O+=2){for(a=h+O,d=O===-b||O!==b&&g[a-1]<g[a+1]?g[a+1]:g[a-1]+1,m=d-O;d<l&&m<r&&e[l-d-1]===t[r-m-1];)d++,m++;if(g[a]=d,d>l)I+=2;else if(m>r)A+=2;else if(!u&&(x=h+f-O,x>=0&&x<s&&-1!==o[x]&&(M=o[x],p=h+M-x,d=l-d,M>=d)))return i(e,t,M,p)}}return[n,e,1,t]}(e,t)}(e=e.slice(0,e.length-h),t=t.slice(0,t.length-h));return s&&u.unshift(0,s),f&&u.push(0,f),u}function i(e,t,n,i){const r=e.slice(0,n),c=t.slice(0,i),h=e.slice(n),s=t.slice(i),f=l(r,c),u=l(h,s);return f.concat(u)}function r(e,t){if(!e||!t||e[0]!==t[0])return 0;let n=0,l=Math.min(e.length,t.length),i=l,r=0;for(;n<i;)e.slice(r,i)===t.slice(r,i)?(n=i,r=n):l=i,i=Math.floor((l-n)/2+n);return i}function c(e,t){if(!e||!t||e[e.length-1]!==t[t.length-1])return 0;let n=0,l=Math.min(e.length,t.length),i=l,r=0;for(;n<i;)e.slice(e.length-i,e.length-r)===t.slice(t.length-i,t.length-r)?(n=i,r=n):l=i,i=Math.floor((l-n)/2+n);return i}function h(e,t,n,l,i){const r=e.length;r&&l<5?(e[r-3]+=t+n,e[r-1]+=l+i):e.push(n,l,i)}t.diff=function(e,t){const i=[],r=l(e,t);let c,s=0,f="";for(c=0;c<r.length;c+=2)0===r[c]?(s=r[c+1].length,f=r[c+1]):(r[c]===n?h(i,f,"",s,r[c+1].length):h(i,f,r[c+1],s,0),s=0,f="");return i},t.patch=function(e,t){let n,l=0,i="";for(n=0;n<t.length;n+=3)i+=e.substr(l,t[n+1])+t[n],l+=t[n+1]+t[n+2];return l<e.length&&(i+=e.substr(l)),i}}));
//# sourceMappingURL=index.min.js.map