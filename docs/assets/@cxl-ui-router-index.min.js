var __decorate=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,u=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(u=(i<3?n(u):i>3?n(t,r,u):n(t,r))||u);return i>3&&u&&Object.defineProperty(t,r,u),u};define("@cxl/ui-router",["require","exports","@cxl/router","@cxl/rx","@cxl/component","@cxl/dom","@cxl/ui/appbar.js","@cxl/ui/item.js","@cxl/ui/tabs.js","@cxl/tsx","@cxl/template","@cxl/ui/theme.js"],(function(e,t,r,o,n,i,u,a,l,s,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RouterComponent=t.RouterOutlet=t.RouterItem=t.A=t.RouterTab=t.RouterLink=t.RouterAppbarTitle=t.RouterTitle=t.Router=t.initializeRouter=t.setDocumentTitle=t.routerStrategy=t.routerOutlet=t.routeIsActive=t.DefaultRoute=t.Route=t.routerState=t.router=void 0;const p=new o.Reference,f=new o.Reference;function m(e){return p.map((()=>t.router.isActiveUrl(e)))}function h(e){let t;return p.tap((r=>{var o,n;const{url:i,root:u}=r;u.parentNode!==e?e.appendChild(u):t&&t!==u&&t.parentNode&&e.removeChild(t),t=u,i.hash?null===(o=e.querySelector(`a[name="${i.hash}"]`))||void 0===o||o.scrollIntoView():e.parentElement&&"pop"!==(null===(n=history.state)||void 0===n?void 0:n.lastAction)&&requestAnimationFrame((()=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.scrollTo(0,0)}))}))}function g(e,n=r.Strategies.query){return(0,o.merge)((0,o.observable)((()=>f.next(n))),e.tap((()=>t.router.go(n.deserialize()))),p.tap((e=>n.serialize(e.url))).catchError(((e,t)=>"SecurityError"===e.name?o.EMPTY:t)))}function v(){return p.switchMap((e=>{const t=[];let r=e.current;do{const e=r.routeTitle;e&&t.unshift(e instanceof o.Observable?e:(0,o.of)(e))}while(r=r.parentNode);return(0,o.combineLatest)(...t)})).tap((e=>document.title=e.join(" - ")))}function b(e,t=r.Strategies.query,n){const u="string"==typeof t?r.Strategies[t]:t,a=n||(u===r.Strategies.hash?(0,i.onHashChange)():(0,i.onLocation)());return(0,o.merge)(g(a,u),h(e),v())}t.router=new r.Router((e=>p.next(e))),t.routerState=p,t.Route=function(e){return r=>{const o="string"==typeof e?{path:e}:e;t.router.route({...o,render:()=>(0,s.dom)(r)})}},t.DefaultRoute=function(e=""){return r=>{const o="string"==typeof e?{path:e}:e;t.router.route({...o,isDefault:!0,render:()=>(0,s.dom)(r)})}},t.routeIsActive=m,t.routerOutlet=h,t.routerStrategy=g,t.setDocumentTitle=v,t.initializeRouter=b,t.Router=function(e=r.Strategies.query,t){return r=>{(0,n.augment)(r,[r=>b(r,e,t)])}};const x=p.raf().map((e=>{const t=[];let r=e.current;do{r.routeTitle&&t.unshift({title:r.routeTitle,first:r===e.current,path:y(r)})}while(r=r.parentNode);return t}));function y(e){var o,n;const i=(0,r.getElementRoute)(e);return i&&(0,r.replaceParameters)((null===(o=i.path)||void 0===o?void 0:o.toString())||"",(null===(n=t.router.state)||void 0===n?void 0:n.arguments)||{})}function _(){return(0,s.dom)(u.AppbarTitle,null,(0,c.each)(x,(function(e){return e.first?(0,s.dom)(n.Span,null,e.title):(0,s.dom)("span",{slot:"parent"},(0,s.dom)(T,{href:e.path},e.title)," / ")})))}t.RouterTitle=_;let A=class extends n.Component{};function R(e,t){const r=document.createElement("div");return r.style.display="contents",r.routeTitle=t,r.appendChild(e.content.cloneNode(!0)),r}A=__decorate([(0,n.Augment)("cxl-router-appbar-title",(0,d.css)({$:{display:"contents"}}),_)],A),t.RouterAppbarTitle=A;let T=class extends n.Component{constructor(){super(...arguments),this.focusable=!1,this.external=!1}};__decorate([(0,n.Attribute)()],T.prototype,"href",void 0),__decorate([(0,n.Attribute)()],T.prototype,"focusable",void 0),__decorate([(0,n.Attribute)()],T.prototype,"external",void 0),T=__decorate([(0,n.Augment)("cxl-router-link",(e=>{const r=(0,s.dom)("a",{className:"link"},(0,s.dom)("slot",null));return e.bind((0,o.merge)((0,n.get)(e,"focusable").tap((e=>r.tabIndex=e?0:-1)),(0,o.combineLatest)(f,(0,n.get)(e,"href"),(0,n.get)(e,"external")).tap((([e,t,o])=>void 0!==t&&(r.href=o?t:e.getHref(t)))),(0,i.onAction)(r).tap((r=>{r.preventDefault(),void 0!==e.href&&(e.external?location.assign(e.href):t.router.go(e.href))})))),r}),(0,d.css)({$:{display:"contents"},link:{outline:0,textDecoration:"none",color:"inherit",cursor:"pointer"}}))],T),t.RouterLink=T;let S=class extends n.Component{constructor(){super(...arguments),this.href=""}};__decorate([(0,n.Attribute)()],S.prototype,"href",void 0),S=__decorate([(0,n.Augment)("cxl-router-tab",(0,c.role)("tab"),(0,d.css)({$:{flexGrow:1}}),(e=>(0,s.dom)(T,{href:(0,n.get)(e,"href")},(0,s.dom)(l.Tab,{$:t=>(0,i.on)(t,"cxl-tab.selected").tap((()=>(0,i.trigger)(e,"cxl-tab.selected",t))),selected:(0,n.get)(e,"href").switchMap(m)},(0,s.dom)("slot",null)))))],S),t.RouterTab=S;let w=class extends T{constructor(){super(...arguments),this.focusable=!0}};w=__decorate([(0,n.Augment)("cxl-router-a",(0,d.css)({$:{textDecoration:"underline"},$focusWithin:{outline:"var(--cxl-primary) auto 1px;"}}))],w),t.A=w;let C=class extends n.Component{constructor(){super(...arguments),this.disabled=!1}focus(){var e,t;null===(t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("cxl-item"))||void 0===t||t.focus()}};__decorate([(0,n.Attribute)()],C.prototype,"href",void 0),__decorate([(0,n.Attribute)()],C.prototype,"disabled",void 0),C=__decorate([(0,n.Augment)("cxl-router-item",(e=>(0,s.dom)(T,{className:"link",href:(0,n.get)(e,"href")},(0,s.dom)(a.Item,{$:r=>p.tap((()=>{void 0!==e.href&&(r.selected=t.router.isActiveUrl(e.href))}))},(0,s.dom)("slot",null)))),(0,d.css)({$:{display:"block"},link:{outline:0,textDecoration:"none"},...d.StateStyles}),(e=>(0,i.onAction)(e).pipe((0,c.triggerEvent)(e,"drawer.close"))),(e=>(0,n.get)(e,"disabled").tap((t=>e.setAttribute("aria-disabled",t?"true":"false")))))],C),t.RouterItem=C;let E=class extends n.Component{};E=__decorate([(0,n.Augment)("cxl-router-outlet",h)],E),t.RouterOutlet=E;let D=class extends n.Component{constructor(){super(...arguments),this.strategy="query"}};__decorate([(0,n.Attribute)()],D.prototype,"strategy",void 0),D=__decorate([(0,n.Augment)("cxl-router",(e=>{function u(e){const r=e.dataset;if(r.registered)return;r.registered="true";const o=r.title||void 0;t.router.route({path:r.path,id:r.id||void 0,parent:r.parent||void 0,isDefault:e.hasAttribute("data-default"),render:R.bind(null,e,o)})}return(0,i.onReady)().switchMap((()=>{for(const t of Array.from(e.children))"TEMPLATE"===t.tagName&&u(t);return(0,o.merge)((0,i.onChildrenMutation)(e).tap((e=>{"added"===e.type&&"TEMPLATE"===e.value.tagName&&u(e.value)})),(0,n.get)(e,"strategy").switchMap((e=>{const t=r.Strategies[e];return g((0,i.onLocation)(),t)})))}))}))],D),t.RouterComponent=D}));
//# sourceMappingURL=index.min.js.map