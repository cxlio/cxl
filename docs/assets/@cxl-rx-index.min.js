define("@cxl/rx",["require","exports"],(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.operators=r.ref=r.subject=r.observable=r.be=r.EMPTY=r.throwError=r.finalize=r.combineLatest=r.zip=r.merge=r.publishLast=r.share=r.select=r.distinctUntilChanged=r.catchError=r.tap=r.first=r.takeWhile=r.take=r.filter=r.exhaustMap=r.mergeMap=r.switchMap=r.debounceTime=r.timer=r.interval=r.debounceFunction=r.reduce=r.map=r.operator=r.operatorNext=r.toPromise=r.of=r.from=r.fromPromise=r.fromArray=r.isInterop=r.defer=r.concat=r.Reference=r.ReplaySubject=r.BehaviorSubject=r.Subject=r.Observable=r.pipe=r.Subscriber=r.observableSymbol=void 0,r.observableSymbol="@@observable";class t{constructor(e,r,t){this.observer=e,this.closed=!1;try{t&&t(this),r&&(this.onUnsubscribe=r(this)),this.closed&&this.onUnsubscribe&&this.onUnsubscribe()}catch(e){this.error(e)}}setTeardown(e){if(this.teardown)throw new Error("teardown method already set");this.teardown=e}next(e){var r,t;if(!this.closed)try{null===(t=(r=this.observer).next)||void 0===t||t.call(r,e)}catch(e){this.error(e)}}error(e){if(this.closed)throw e;{const r=this.observer;if(!r.error)throw this.unsubscribe(),e;try{r.error(e)}finally{this.unsubscribe()}}}complete(){var e,r;if(!this.closed)try{null===(r=(e=this.observer).complete)||void 0===r||r.call(e)}finally{this.unsubscribe()}}unsubscribe(){var e;this.closed||(this.closed=!0,null===(e=this.teardown)||void 0===e||e.call(this),this.onUnsubscribe&&this.onUnsubscribe())}}r.Subscriber=t,r.pipe=function(...e){return r=>e.reduce(((e,r)=>r(e)),r)};class n{constructor(e){this.__subscribe=e}[r.observableSymbol](){return this}then(e,r){return h(this).then(e,r)}pipe(...e){return e.reduce(((e,r)=>r(e)),this)}subscribe(e,r){return new t(e&&"function"!=typeof e?e:{next:e},this.__subscribe,r)}}r.Observable=n;class s extends n{constructor(){super((e=>this.onSubscribe(e))),this.observers=new Set,this.isStopped=!1}onSubscribe(e){return this.isStopped?(e.complete(),()=>{}):(this.observers.add(e),()=>this.observers.delete(e))}next(e){if(!this.isStopped)for(const r of Array.from(this.observers))r.closed||r.next(e)}error(e){if(!this.isStopped){this.isStopped=!0;let r,t=!1;for(const n of this.observers)try{n.error(e)}catch(e){t=!0,r=e}if(t)throw r}}complete(){this.isStopped||(this.isStopped=!0,Array.from(this.observers).forEach((e=>e.complete())),this.observers.clear())}}r.Subject=s;class o extends s{constructor(e){super(),this.currentValue=e}get value(){return this.currentValue}onSubscribe(e){const r=super.onSubscribe(e);return this.isStopped||e.next(this.currentValue),r}next(e){this.currentValue=e,super.next(e)}}r.BehaviorSubject=o;r.ReplaySubject=class extends s{constructor(e=1/0){super(),this.bufferSize=e,this.buffer=[],this.hasError=!1}onSubscribe(e){return this.observers.add(e),this.buffer.forEach((r=>e.next(r))),this.hasError?e.error(this.lastError):this.isStopped&&e.complete(),()=>this.observers.delete(e)}error(e){this.hasError=!0,this.lastError=e,super.error(e)}next(e){return this.buffer.length===this.bufferSize&&this.buffer.shift(),this.buffer.push(e),super.next(e)}};const i={};class u extends s{constructor(){super(...arguments),this.$value=i}get hasValue(){return this.$value!==i}get value(){if(this.$value===i)throw new Error("Reference not initialized");return this.$value}onSubscribe(e){return this.$value!==i&&e.next(this.$value),super.onSubscribe(e)}next(e){return this.$value=e,super.next(e)}}function c(e){return new n((r=>{const t=e().subscribe(r);return()=>t.unsubscribe()}))}function b(e){return!!e[r.observableSymbol]}function l(e){return new n((r=>{for(const t of e)r.closed||r.next(t);r.complete()}))}function a(e){return new n((r=>{e.then((e=>{r.closed||r.next(e),r.complete()})).catch((e=>r.error(e)))}))}function h(e){return new Promise(((r,t)=>{let n;e.subscribe({next:e=>n=e,error:e=>t(e),complete:()=>r(n)})}))}function f(e,r){return t=>new n((n=>{let s;n.setTeardown((()=>{null==r||r(),s.unsubscribe()})),t.subscribe({next:e(n),error:n.error.bind(n),complete:n.complete.bind(n)},(e=>s=e))}))}function p(e){return r=>new n((t=>{let n;const s=e(t,r);t.setTeardown((()=>{var e;null===(e=s.unsubscribe)||void 0===e||e.call(s),n.unsubscribe()})),s.error||(s.error=t.error.bind(t)),s.complete||(s.complete=t.complete.bind(t)),r.subscribe(s,(e=>n=e))}))}function d(e){return f((r=>t=>{r.next(e(t))}))}function m(e,r){return p((t=>{let n=r,s=0;return{next(r){n=e(n,r,s++)},complete(){t.next(n),t.complete()}}}))}function x(e){return new n((r=>{const t=setTimeout((()=>{r.next(),r.complete()}),e);return()=>clearTimeout(t)}))}function v(e=0,r=x){return p((t=>{let n,s=!1;return{next(o){null==n||n.unsubscribe(),n=r(e).subscribe((()=>{n=void 0,t.next(o),s&&t.complete()}))},complete(){n?s=!0:t.complete()},unsubscribe:()=>null==n?void 0:n.unsubscribe()}}))}function w(e){return r=>_((t=>{let n,s=!1;const o=()=>{null==n||n.unsubscribe(),n=void 0,s&&t.complete()};r.subscribe({next(r){o();e(r).subscribe({next:t.next.bind(t),error:t.error.bind(t),complete:o},(e=>n=e))},error:t.error.bind(t),complete(){s=!0,n||t.complete()}},(e=>t.setTeardown((()=>{o(),e.unsubscribe()}))))}))}function S(e){return r=>_((t=>{const n=[];let s=0,o=0,i=!1;function u(){n.forEach((e=>e.unsubscribe()))}return n.push(r.subscribe({next:r=>{s++,n.push(e(r).subscribe({next:e=>t.next(e),error:e=>{t.error(e),u()},complete:()=>{o++,i&&o===s&&(t.complete(),u())}}))},error:t.error.bind(t),complete(){i=!0,o===s&&(t.complete(),u())}})),u}))}function y(e){return f((r=>t=>{e(t)&&r.next(t)}))}function E(e){return f((r=>t=>{e-- >0&&!r.closed&&r.next(t),(e<=0||r.closed)&&r.complete()}))}function g(e){return f((r=>t=>{!r.closed&&e(t)?r.next(t):r.complete()}))}function T(){return f((e=>r=>{e.next(r),e.complete()}))}function M(e){return f((r=>t=>{e(t),r.next(t)}))}function P(e){return p(((r,t)=>{let n;const s={next:r.next.bind(r),error(o){try{if(r.closed)return;const i=e(o,t);i&&(null==n||n.unsubscribe(),i.subscribe(s,(e=>n=e)))}catch(e){return r.error(e)}},unsubscribe(){null==n||n.unsubscribe()}};return s}))}r.Reference=u,r.concat=function(...e){return new n((r=>{let t,n=0;return function s(){const o=e[n++];o&&!r.closed?(t&&t.unsubscribe(),o.subscribe({next:r.next.bind(r),error:r.error.bind(r),complete:s},(e=>t=e))):r.complete()}(),()=>null==t?void 0:t.unsubscribe()}))},r.defer=c,r.isInterop=b,r.fromArray=l,r.fromPromise=a,r.from=function(e){return e instanceof n?e:b(e)?c(e[r.observableSymbol]):Array.isArray(e)?l(e):a(e)},r.of=function(...e){return l(e)},r.toPromise=h,r.operatorNext=f,r.operator=p,r.map=d,r.reduce=m,r.debounceFunction=function(e,r){let t;return function(...n){t&&clearTimeout(t),t=setTimeout((()=>{e.apply(this,n)}),r)}},r.interval=function(e){return new n((r=>{const t=setInterval(r.next.bind(r),e);return()=>clearInterval(t)}))},r.timer=x,r.debounceTime=v,r.switchMap=w,r.mergeMap=S,r.exhaustMap=function(e){return p((r=>{let t;function n(){null==t||t.unsubscribe(),t=void 0}return{next(s){t||(t=e(s).subscribe({next:r.next.bind(r),error:r.error.bind(r),complete:n}))},unsubscribe:n}}))},r.filter=y,r.take=E,r.takeWhile=g,r.first=T,r.tap=M,r.catchError=P;const j={};function A(){return f((e=>{let r=j;return t=>{t!==r&&(r=t,e.next(t))}}))}function z(e){return d((r=>r[e]))}function U(){return e=>{const r=L();let t,n=0;return _((s=>{t||(n++,t=e.subscribe(r));const o=r.subscribe(s);return()=>{o.unsubscribe(),0==--n&&t&&(t.unsubscribe(),t=void 0)}}))}}function k(){return e=>{const r=new s;let t,n,o=!1,i=!1;return _((s=>{let u;return i?(s.next(n),s.complete()):u=r.subscribe(s),t||(t=e.subscribe({next:e=>{o=!0,n=e},error:s.error.bind(s),complete:()=>{i=!0,o&&r.next(n),r.complete()}})),()=>null==u?void 0:u.unsubscribe()}))}}function $(e){return p((r=>({next:r.next.bind(r),unsubscribe:e})))}function _(e){return new n(e)}function L(){return new u}r.distinctUntilChanged=A,r.select=z,r.share=U,r.publishLast=k,r.merge=function(...e){return 1===e.length?e[0]:new n((r=>{let t=e.length;const n=[];for(const s of e)r.closed||s.subscribe({next:r.next.bind(r),error:r.error.bind(r),complete(){1==t--&&r.complete()}},(e=>n.push(e)));return()=>n.forEach((e=>e.unsubscribe()))}))},r.zip=function(...e){return 0===e.length?r.EMPTY:new n((r=>{const t=new Array(e.length),n=[];let s=0;function o(){let e=!0;for(const r of t)if(!r||0===r.length){e=!1;break}if(e&&(r.next(t.map((e=>e.shift()))),o()),s){for(const e of t)if(0!==e.length)return;r.complete();for(const e of n)e.unsubscribe()}}return e.forEach(((e,i)=>{const u=t[i]=[];n.push(e.subscribe({next(e){u.push(e),o()},error:r.error.bind(r),complete(){s++,o()}}))})),()=>n.forEach((e=>e.unsubscribe()))}))},r.combineLatest=function(...e){return 0===e.length?r.EMPTY:new n((r=>{let t=e.length;const n=t;let s=0,o=!1;const i=new Array(t),u=new Array(t),c=e.map(((e,c)=>e.subscribe({next(e){u[c]=e,i[c]||(i[c]=!0,++s>=n&&(o=!0)),o&&r.next(u.slice(0))},error:r.error.bind(r),complete(){--t<=0&&r.complete()}})));return()=>c.forEach((e=>e.unsubscribe()))}))},r.finalize=$,r.throwError=function(e){return new n((r=>r.error(e)))},r.EMPTY=new n((e=>e.complete())),r.be=function(e){return new o(e)},r.observable=_,r.subject=function(){return new s},r.ref=L,r.operators={catchError:P,debounceTime:v,distinctUntilChanged:A,filter:y,finalize:$,first:T,map:d,mergeMap:S,publishLast:k,reduce:m,select:z,share:U,switchMap:w,take:E,takeWhile:g,tap:M};for(const e in r.operators)n.prototype[e]=function(...t){return this.pipe(r.operators[e](...t))}}));
//# sourceMappingURL=index.min.js.map