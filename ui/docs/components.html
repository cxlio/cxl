<cxl-t h3>Components</cxl-t>
<p></p>
<style>
	.components-card {
		transition: box-shadow var(--cxl-speed);
	}
	.components-card:hover {
		box-shadow: 2px 2px 6px var(--cxl-elevation);
	}
</style>
<cxl-input-chips id="input-chips"> </cxl-input-chips>

<cxl-grid id="grid"> </cxl-grid>

<script>
	(() => {
		const META = {
			'cxl-appbar': {
				icon: 'window-maximize',
				tags: ['navigation'],
			},
			'cxl-appbar-title': {
				icon: 'window-maximize',
				tags: ['navigation'],
			},
			'cxl-autocomplete': {
				beta: true,
				icon: 'edit',
			},
			'cxl-avatar': {
				icon: 'user-circle',
				tags: ['indicator'],
			},
			'cxl-button': {
				icon: 'hand-pointer',
				tags: ['button'],
			},
			'cxl-backdrop': {
				tags: ['popup'],
			},
			'cxl-badge': {
				tags: ['indicator'],
				icon: 'exclamation-circle',
				added: '2.0.2',
				beta: true,
			},
			'cxl-c': {
				beta: true,
				icon: 'columns',
				tags: ['layout'],
			},
			'cxl-calendar': {
				icon: 'calendar',
				beta: true,
				tags: ['input', 'date'],
			},
			'cxl-calendar-month': {
				icon: 'calendar',
				beta: true,
				tags: ['input', 'date'],
			},
			'cxl-card': {
				icon: 'address-card',
				tags: ['layout'],
			},
			'cxl-checkbox': {
				icon: 'check-square',
				tags: ['button'],
			},
			'cxl-chip': {
				beta: true,
				icon: 'capsules',
				tags: ['indicator'],
			},
			'cxl-datatable': {
				icon: 'table',
				beta: true,
				added: '2.0.2',
				tags: ['table'],
			},
			'cxl-datepicker': {
				icon: 'calendar',
				beta: true,
				tags: ['date', 'picker', 'input'],
			},
			'cxl-dialog': {
				icon: 'window-maximize',
				tags: ['popup'],
			},
			'cxl-dialog-alert': {
				icon: 'window-maximize',
				tags: ['popup'],
			},
			'cxl-dialog-confirm': {
				icon: 'window-maximize',
				tags: ['popup'],
			},
			'cxl-drag': {
				icon: 'arrows-alt',
			},
			'cxl-drag-region': {
				icon: 'vector-square',
			},
			'cxl-drag-slot': {
				icon: 'grip-horizontal',
			},
			'cxl-drawer': {
				beta: true,
				icon: 'columns',
				tags: ['layout'],
			},
			'cxl-fab': {
				icon: 'plus-circle',
				tags: ['button'],
			},
			'cxl-field': {
				icon: 'edit',
				tags: ['new'],
			},
			'cxl-fieldset': {
				icon: 'edit',
				tags: ['new'],
				beta: true,
			},
			'cxl-form': {
				icon: 'edit',
				beta: true,
				tags: ['forms'],
			},
			'cxl-form-group': {
				icon: 'edit',
				tags: ['forms'],
			},
			'cxl-grid': {
				beta: true,
				icon: 'th',
				tags: ['layout'],
			},
			'cxl-hr': {
				icon: 'minus',
				tags: ['layout'],
			},
			'cxl-icon': {
				icon: 'image',
				tags: ['indicator'],
			},
			'cxl-input': {
				icon: 'edit',
				tags: ['forms'],
			},
			'cxl-item': {
				icon: 'list',
				tags: ['layout'],
			},
			'cxl-list': {
				icon: 'list',
				tags: ['layout'],
				beta: true,
			},
			'cxl-menu': {
				icon: 'list-alt',
				tags: ['navigation'],
			},
			'cxl-menu-toggle': {
				icon: 'ellipsis-v',
				tags: ['button'],
			},
			'cxl-multiselect': {
				icon: 'caret-square-down',
				tags: ['forms', 'multiple'],
			},
			'cxl-navbar': {
				icon: 'bars',
				tags: ['navigation'],
			},
			'cxl-option': {
				icon: 'ellipsis-v',
				tags: ['forms'],
			},
			'cxl-password': {
				icon: 'key',
				tags: ['forms'],
			},
			'cxl-progress': {
				icon: 'hourglass',
				tags: ['indicator'],
			},
			'cxl-radio': {
				icon: 'dot-circle',
				tags: ['forms'],
			},
			'cxl-ripple': {
				added: '1.6.0',
				icon: 'water',
				tags: ['interaction'],
			},
			'cxl-ripple-container': {
				added: '1.6.0',
				beta: true,
				tags: ['interaction'],
			},
			'cxl-search-input': {
				beta: true,
				icon: 'search',
				tags: ['forms'],
			},
			'cxl-select': {
				icon: 'caret-square-down',
				tags: ['forms'],
			},
			'cxl-slider': {
				icon: 'sliders-h',
				tags: ['forms'],
			},
			'cxl-snackbar': {
				icon: 'comment-alt',
				tags: ['popup'],
			},
			'cxl-spinner': {
				icon: 'spinner',
				tags: ['indicator'],
			},
			'cxl-submit': {
				icon: 'hand-pointer',
				beta: true,
				tags: ['forms'],
			},
			'cxl-switch': {
				icon: 'toggle-on',
				tags: ['forms'],
			},
			'cxl-t': {
				icon: 'font',
				tags: ['style'],
			},
			'cxl-tab': {
				icon: 'folder',
				tags: ['navigation'],
			},
			'cxl-table': {
				icon: 'table',
				beta: true,
				tags: ['table'],
			},
			'cxl-tabs': {
				icon: 'folder',
				tags: ['navigation'],
			},
			'cxl-textarea': {
				icon: 'align-left',
				tags: ['forms'],
			},
		};
		const inputChips = document.getElementById('input-chips');
		const grid = document.getElementById('grid');
		const ComponentKind = 35;

		function sortByName(a, b) {
			return a.name > b.name ? 1 : -1;
		}

		function getSummary(docs) {
			return docs.content ? docs.content.find(c => !c.tag) : '';
		}

		function getIcon(tagName) {
			const meta = META[tagName];
			return (meta && meta.icon) || '';
		}

		function renderCard(node) {
			const tagName = node.docs.tagName;
			const icon = getIcon(tagName);
			let summary = '';
			if (node.docs) {
				const doc = getSummary(node.docs);
				summary = doc ? doc.value.split('.')[0] : '';
			}
			return summary
				? `
		<cxl-c sm6 md4><cxl-a style="text-decoration:none" href="${node.href}"><cxl-card class="components-card" style="height: 100%"><cxl-c pad16>
			<cxl-c flex style="padding: 0 0 12px 0"><div style="width: 48px;text-align: center; line-height: 36px; color: var(--cxl-header-text);font-size:20px;margin-right:4px"><cxl-icon icon="${icon}"></cxl-icon></div>
			<div>
				<cxl-t subtitle>${node.name}</cxl-t>
				<cxl-t subtitle2>&lt;${tagName}&gt;</cxl-t>
			</div></cxl-c>
			<cxl-t body2>${summary}.</cxl-t>
		</cxl-c></cxl-card></cxl-a></cxl-c>
			`
				: '';
		}

		function parseJson(res) {
			let gridHtml = '';
			let chipsHtml = '';

			res.sort(sortByName).forEach(symbol => {
				if (
					symbol.kind === ComponentKind &&
					symbol.docs &&
					symbol.docs.tagName
				) {
					gridHtml += renderCard(symbol);
				}
			});

			grid.innerHTML = gridHtml;
		}

		const summary = fetch('summary.json')
			.then(res => res.json())
			.then(parseJson);
	})();
</script>
